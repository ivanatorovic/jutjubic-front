<div class="page">
  <!-- Top bar -->
  <header class="topbar">
    <a class="brand" routerLink="/videos" aria-label="jutjubic home">
      <span class="logo">▶</span>
      <span class="name">jutjubic</span>
    </a>

    <div class="top-actions">
      <button class="btn ghost" routerLink="/login">Prijava</button>
      <button class="btn primary" routerLink="/register">Registracija</button>
    </div>
  </header>

  <main class="content">
    <div class="card">
      <div class="header">
        <div>
          <h1>Upload videa</h1>
          <p>Naslov, opis, tagovi, lokacija i fajlovi.</p>
        </div>

        <button
          class="btn primary big"
          (click)="upload()"
          [disabled]="!thumbnailFile || !videoFile || !title.trim()"
        >
          Upload
        </button>
      </div>

      <div class="grid">
        <!-- LEVO: tekstualni podaci -->
        <section class="panel">
          <div class="field">
            <label>Naslov</label>
            <input [(ngModel)]="title" type="text" placeholder="npr. Moj prvi video" />
          </div>

          <div class="field">
            <label>Opis</label>
            <textarea [(ngModel)]="description" placeholder="Kratak opis videa..."></textarea>
          </div>

          <div class="grid-2 split">
            <div class="field">
              <label>Lokacija</label>
              <input [(ngModel)]="location" type="text" placeholder="npr. Novi Sad" />
            </div>

            <div class="field">
              <label>Tagovi</label>
              <input [(ngModel)]="tags" type="text" placeholder="npr. fun, vlog, isa" />
              <div class="hint">
                Primer: <span class="chip">#fun</span> <span class="chip">#vlog</span>
              </div>
            </div>
          </div>

          <div class="status-line" *ngIf="msg">
            <span class="status" [class.ok]="msg.includes('✅')" [class.bad]="msg.includes('❌')">
              {{ msg }}
            </span>
          </div>
        </section>

        <!-- DESNO: fajlovi -->
        <section class="panel files">
          <!-- THUMB -->
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Thumbnail</div>
                <div class="file-sub">JPG / PNG</div>
              </div>

              <!-- pravi input je hidden -->
              <input
                #thumbInput
                class="hidden-input"
                type="file"
                accept="image/*"
                (change)="onThumbnailChange($event)"
              />
              <button class="pick" type="button" (click)="thumbInput.click()">
                Izaberi
              </button>
            </div>

            <div class="file-name" [class.muted]="!thumbnailFile">
              {{ thumbnailFile?.name || 'Nije izabrano' }}
            </div>

            <!-- ako imaš thumbnailPreviewUrl u TS-u (što smo ranije dodali), radi preview -->
            <div class="thumb-preview" *ngIf="thumbnailPreviewUrl">
              <img [src]="thumbnailPreviewUrl" alt="thumbnail preview" />
            </div>
          </div>

          <!-- VIDEO -->
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Video</div>
                <div class="file-sub">MP4</div>
              </div>

              <input
                #videoInput
                class="hidden-input"
                type="file"
                accept="video/*"
                (change)="onVideoChange($event)"
              />
              <button class="pick" type="button" (click)="videoInput.click()">
                Izaberi
              </button>
            </div>

            <div class="file-name" [class.muted]="!videoFile">
              {{ videoFile?.name || 'Nije izabrano' }}
            </div>

            <div class="mini-hint">
              Savet: manji fajl = brži upload.
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>
