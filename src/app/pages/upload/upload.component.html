<div class="page">
  <header class="topbar">
    <a class="brand" routerLink="/videos">
      <span class="logo">‚ñ∂</span>
      <span class="name">jutjubic</span>
    </a>
  </header>

  <main class="content">
    <div class="card">
      
      <div class="header">
        <div class="header-text">
          <h1>Upload videa</h1>
          <p>Naslov, opis, tagovi, lokacija i fajlovi.</p>
        </div>

        <div
  class="upload-wrap"
  [class.disabled]="
    uploading ||
    !thumbnailFile ||
    !videoFile ||
    !title.trim() ||
    !description.trim() ||
    !tags.trim()
  "
>
  <button
    class="btn primary upload-btn"
    type="button"
    (click)="upload()"
    [disabled]="
      uploading ||
      !thumbnailFile ||
      !videoFile ||
      !title.trim() ||
      !description.trim() ||
      !tags.trim()
    "
  >
    <span *ngIf="!uploading">Upload</span>
    <span *ngIf="uploading" class="spin"></span>
    <span *ngIf="uploading">Uploading‚Ä¶</span>
  </button>

  <div class="tooltip">
    Popuni sva obavezna polja (naslov, opis, tagovi, thumbnail i video).
  </div>
</div>

      </div>

      
      <div class="grid">
        
        <section class="panel">
          <div class="field">
            <label>Naslov</label>
            <input [(ngModel)]="title" />
          </div>

          <div class="field">
            <label>Opis</label>
            <textarea [(ngModel)]="description"></textarea>
          </div>

          <div class="grid-2">
            <div class="field">
              <label>Lokacija</label>
              <input [(ngModel)]="location" />
            </div>

            <div class="field">
              <label>Tagovi</label>
              <input [(ngModel)]="tags" />

              <div class="tags-preview" *ngIf="tagsList().length">
                <span class="tchip" *ngFor="let t of tagsList()">{{ t }}</span>
              </div>
            </div>
 <!-- PREMIJERA -->


  <!-- PREMIJERA -->
<div class="field">
  <label>Zakazani prikaz</label>

  <div class="check-row">
    <input
      type="checkbox"
      id="sch"
      [(ngModel)]="scheduled"
      (change)="onScheduledToggle()"
    />
    <label for="sch">Objavi kasnije (premijera)</label>
  </div>

  <div class="hint" *ngIf="scheduled">
    Video neƒáe biti dostupan drugim korisnicima pre zakazanog vremena.
  </div>
</div>

<!-- SELECTI ZA VREME PREMIJERE -->
<div class="premiere-row" *ngIf="scheduled">
  <div class="field">
    <label>Godina</label>
    <select [(ngModel)]="premYear" (change)="onMonthYearChange()">
      <option *ngFor="let y of years" [ngValue]="y">{{ y }}</option>
    </select>
  </div>

  <div class="field">
    <label>Mesec</label>
    <select [(ngModel)]="premMonth" (change)="onMonthYearChange()">
      <option *ngFor="let m of months" [ngValue]="m">{{ m }}</option>
    </select>
  </div>

  <div class="field">
    <label>Dan</label>
    <select [(ngModel)]="premDay">
      <option [ngValue]="null">‚Äî</option>
      <option *ngFor="let d of days" [ngValue]="d">{{ d }}</option>
    </select>
  </div>

  <div class="field">
    <label>Sat</label>
    <select [(ngModel)]="premHour">
      <option [ngValue]="null">‚Äî</option>
      <option *ngFor="let h of hours" [ngValue]="h">{{ h }}</option>
    </select>
  </div>

  <div class="field">
    <label>Min</label>
    <select [(ngModel)]="premMinute">
      <option [ngValue]="null">‚Äî</option>
      <option *ngFor="let mi of minutes" [ngValue]="mi">
        {{ (''+mi).padStart(2,'0') }}
      </option>
    </select>
  </div>
</div>

<!-- prikaz izabranog vremena -->
<div class="hint" style="margin-top: 8px" *ngIf="buildScheduledAtIso() as iso">
  Izabrano: <b>{{ iso }}</b>
</div>



          </div>
        </section>

        
        <section class="panel files">
          
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Thumbnail</div>
                <div class="file-sub">JPG / PNG</div>
              </div>

              <input
                #thumbInput
                type="file"
                accept="image/*"
                hidden
                (change)="onThumbnailChange($event)"
              />
              <button class="pick" (click)="thumbInput.click()">Izaberi</button>
            </div>

           <div class="file-meta">
  <span class="file-name">
    {{ thumbnailFile?.name || 'Nije izabrano' }}
  </span>

  <button
    *ngIf="thumbnailFile"
    type="button"
    class="mini-x"
    (click)="clearThumb($event)"
  >
    ‚úï
  </button>
</div>


            <div class="thumb-empty" *ngIf="!thumbnailPreviewUrl">
              <div class="icon">üñºÔ∏è</div>
              <div>Izaberi thumbnail da vidi≈° preview</div>
              <div class="sub">16:9 ¬∑ JPG / PNG</div>
            </div>

            <div class="thumb-preview" *ngIf="thumbnailPreviewUrl">
              <img [src]="thumbnailPreviewUrl" />
            </div>
          </div>

          
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Video</div>
                <div class="file-sub">MP4</div>
              </div>

              <input
                #videoInput
                type="file"
                accept="video/*"
                hidden
                (change)="onVideoChange($event)"
              />
              <button class="pick" (click)="videoInput.click()">Izaberi</button>
            </div>

            <div class="file-meta">
  <span class="file-name">
    {{ videoFile?.name || 'Nije izabrano' }}
  </span>

  <button
    *ngIf="videoFile"
    type="button"
    class="mini-x"
    (click)="clearVideo($event)"
  >
    ‚úï
  </button>
</div>


            <div class="mini-hint">Manji fajl = br≈æi upload</div>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>
