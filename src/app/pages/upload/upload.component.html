<div class="page">
  <header class="topbar">
    <a class="brand" routerLink="/videos">
      <span class="logo">‚ñ∂</span>
      <span class="name">jutjubic</span>
    </a>
  </header>

  <main class="content">
    <div class="card">
      
      <div class="header">
        <div class="header-text">
          <h1>Upload videa</h1>
          <p>Naslov, opis, tagovi, lokacija i fajlovi.</p>
        </div>

        <div
  class="upload-wrap"
  [class.disabled]="
    uploading ||
    !thumbnailFile ||
    !videoFile ||
    !title.trim() ||
    !description.trim() ||
    !tags.trim()
  "
>
  <button
    class="btn primary upload-btn"
    type="button"
    (click)="upload()"
    [disabled]="
      uploading ||
      !thumbnailFile ||
      !videoFile ||
      !title.trim() ||
      !description.trim() ||
      !tags.trim()
    "
  >
    <span *ngIf="!uploading">Upload</span>
    <span *ngIf="uploading" class="spin"></span>
    <span *ngIf="uploading">Uploading‚Ä¶</span>
  </button>

  <div class="tooltip">
    Popuni sva obavezna polja (naslov, opis, tagovi, thumbnail i video).
  </div>
</div>

      </div>

      
      <div class="grid">
        
        <section class="panel">
          <div class="field">
            <label>Naslov</label>
            <input [(ngModel)]="title" />
          </div>

          <div class="field">
            <label>Opis</label>
            <textarea [(ngModel)]="description"></textarea>
          </div>

          <div class="grid-2">
            <div class="field">
              <label>Lokacija</label>
              <input [(ngModel)]="location" />
            </div>

            <div class="field">
              <label>Tagovi</label>
              <input [(ngModel)]="tags" />

              <div class="tags-preview" *ngIf="tagsList().length">
                <span class="tchip" *ngFor="let t of tagsList()">{{ t }}</span>
              </div>
            </div>
          </div>
        </section>

        
        <section class="panel files">
          
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Thumbnail</div>
                <div class="file-sub">JPG / PNG</div>
              </div>

              <input
                #thumbInput
                type="file"
                accept="image/*"
                hidden
                (change)="onThumbnailChange($event)"
              />
              <button class="pick" (click)="thumbInput.click()">Izaberi</button>
            </div>

           <div class="file-meta">
  <span class="file-name">
    {{ thumbnailFile?.name || 'Nije izabrano' }}
  </span>

  <button
    *ngIf="thumbnailFile"
    type="button"
    class="mini-x"
    (click)="clearThumb($event)"
  >
    ‚úï
  </button>
</div>


            <div class="thumb-empty" *ngIf="!thumbnailPreviewUrl">
              <div class="icon">üñºÔ∏è</div>
              <div>Izaberi thumbnail da vidi≈° preview</div>
              <div class="sub">16:9 ¬∑ JPG / PNG</div>
            </div>

            <div class="thumb-preview" *ngIf="thumbnailPreviewUrl">
              <img [src]="thumbnailPreviewUrl" />
            </div>
          </div>

          
          <div class="file-card">
            <div class="file-head">
              <div>
                <div class="file-title">Video</div>
                <div class="file-sub">MP4</div>
              </div>

              <input
                #videoInput
                type="file"
                accept="video/*"
                hidden
                (change)="onVideoChange($event)"
              />
              <button class="pick" (click)="videoInput.click()">Izaberi</button>
            </div>

            <div class="file-meta">
  <span class="file-name">
    {{ videoFile?.name || 'Nije izabrano' }}
  </span>

  <button
    *ngIf="videoFile"
    type="button"
    class="mini-x"
    (click)="clearVideo($event)"
  >
    ‚úï
  </button>
</div>


            <div class="mini-hint">Manji fajl = br≈æi upload</div>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>
